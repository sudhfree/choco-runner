<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sweetness of My Life</title>
  <style>
    :root { --bg1:#fff3e8; --bg2:#ffe8f2; --ink:#3a2a1a; }
    *{ box-sizing:border-box; }
    body{
      margin:0; height:100vh; overflow:hidden;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      background: radial-gradient(1200px 800px at 15% 10%, var(--bg2), transparent 60%),
                  radial-gradient(1200px 900px at 85% 90%, var(--bg1), transparent 60%),
                  linear-gradient(135deg, #fff, #fff7fb);
    }

    .hint{
      position:fixed; left:50%; top:14px; transform:translateX(-50%);
      padding:10px 14px; border-radius:999px;
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(0,0,0,.06);
      backdrop-filter: blur(8px);
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      font-size:14px;
      user-select:none;
      z-index:10;
    }

    .stage{
      position:relative; width:100%; height:100%;
    }

    /* Chocolate runner with real image */
    .choco{
      position:absolute;
      width:130px; height:130px;
      transform: translate(-50%, -50%);
      transition: transform .12s ease;
      user-select:none;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      cursor:pointer;
    }
    .choco img{
      width:100%; height:auto;
      border-radius:18px;
      filter: drop-shadow(0 14px 28px rgba(0,0,0,.25));
    }
    .choco .face-row{
      position:absolute; top:50%; left:50%;
      transform: translate(-50%,-50%);
      display:flex; flex-direction:column; align-items:center; gap:2px;
      z-index:2;
      pointer-events:none;
    }
    .choco .eyes{
      font-size:26px;
      filter: drop-shadow(0 3px 5px rgba(0,0,0,.35));
      letter-spacing:4px;
    }
    .choco .mouth{
      font-size:24px;
      filter: drop-shadow(0 4px 6px rgba(0,0,0,.35));
    }

    /* Timer display */
    .timer{
      position:fixed; right:18px; top:14px;
      padding:8px 16px; border-radius:999px;
      background: rgba(255,255,255,.8);
      border: 1px solid rgba(0,0,0,.06);
      backdrop-filter: blur(8px);
      box-shadow: 0 8px 24px rgba(0,0,0,.08);
      font-size:16px; font-weight:700;
      z-index:10; user-select:none;
      color:var(--ink);
    }
    .timer.urgent{ color:#d32f2f; }

    /* Burst animation */
    @keyframes burst{
      0%{ transform:translate(-50%,-50%) scale(1); opacity:1; }
      30%{ transform:translate(-50%,-50%) scale(1.5); opacity:1; }
      60%{ transform:translate(-50%,-50%) scale(1.8) rotate(20deg); opacity:.6; }
      100%{ transform:translate(-50%,-50%) scale(0) rotate(60deg); opacity:0; }
    }
    .choco.burst{ animation: burst .8s ease-out forwards; pointer-events:none; }

    /* Burst particles */
    .burst-particle{
      position:absolute; pointer-events:none;
      font-size:30px;
      animation: burstFly 1.1s ease-out forwards;
    }
    @keyframes burstFly{
      0%{ opacity:1; transform:translate(0,0) scale(1); }
      100%{ opacity:0; transform:translate(var(--tx), var(--ty)) scale(.2) rotate(400deg); }
    }

    /* Peeking chocolates from all 4 sides */
    .side-peek{
      position:fixed;
      z-index:9;
      pointer-events:none;
      display:flex; align-items:center;
      transition: transform 1.1s cubic-bezier(.2,.9,.2,1);
    }
    .side-peek .choco-peek{
      width:110px; height:110px;
      display:flex; align-items:center; justify-content:center;
      position:relative; flex-shrink:0;
    }
    .side-peek .choco-peek img{
      width:100%; height:auto;
      border-radius:18px;
      filter: drop-shadow(0 10px 22px rgba(0,0,0,.22));
    }
    .side-peek .peek-face{
      position:absolute; top:50%; left:50%;
      transform:translate(-50%,-50%);
      display:flex; flex-direction:column; align-items:center; gap:1px;
      z-index:2; pointer-events:none;
    }
    .side-peek .peek-eyes{ font-size:22px; filter:drop-shadow(0 2px 4px rgba(0,0,0,.3)); letter-spacing:3px; }
    .side-peek .peek-mouth{ font-size:20px; filter:drop-shadow(0 3px 5px rgba(0,0,0,.3)); }

    .side-peek .card{
      padding:12px 16px;
      border-radius:16px;
      background: rgba(255,255,255,.88);
      border: 1px solid rgba(0,0,0,.06);
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 35px rgba(0,0,0,.12);
      opacity:0;
      transition: opacity .8s ease .4s;
      max-width:260px;
    }
    .side-peek.show .card{ opacity:1; }
    .card .msg{
      display:inline-block;
      padding:8px 14px;
      border-radius:999px;
      background: linear-gradient(135deg, #ffb3d1, #ffd6a8);
      border: 1px solid rgba(0,0,0,.06);
      font-weight:650;
      font-size:14px;
      line-height:1.4;
    }

    /* RIGHT side */
    .side-peek.from-right{
      right:0; top:50%;
      transform:translateY(-50%) translateX(100%);
      flex-direction: row-reverse;
      gap:12px;
      padding:10px;
    }
    .side-peek.from-right.show{ transform:translateY(-50%) translateX(0); }

    /* LEFT side */
    .side-peek.from-left{
      left:0; top:50%;
      transform:translateY(-50%) translateX(-100%);
      flex-direction: row;
      gap:12px;
      padding:10px;
    }
    .side-peek.from-left.show{ transform:translateY(-50%) translateX(0); }

    /* TOP side */
    .side-peek.from-top{
      top:0; left:50%;
      transform:translateX(-50%) translateY(-100%);
      flex-direction: column;
      gap:10px;
      padding:10px;
    }
    .side-peek.from-top.show{ transform:translateX(-50%) translateY(0); }

    /* BOTTOM side */
    .side-peek.from-bottom{
      bottom:0; left:50%;
      transform:translateX(-50%) translateY(100%);
      flex-direction: column-reverse;
      gap:10px;
      padding:10px;
    }
    .side-peek.from-bottom.show{ transform:translateX(-50%) translateY(0); }

    /* Little hearts */
    .heart{
      position:absolute;
      font-size:16px;
      opacity:0;
      transform: translate(-50%,-50%) scale(.7);
      animation: pop 900ms ease forwards;
      pointer-events:none;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.15));
    }
    @keyframes pop{
      0%{ opacity:0; transform: translate(-50%,-40%) scale(.6); }
      30%{ opacity:1; }
      100%{ opacity:0; transform: translate(-50%,-120%) scale(1.15); }
    }

    @media (max-width:520px){
      .hint{ font-size:13px; }
      .card{ max-width:200px; }
      .side-peek .choco-peek{ width:80px; height:80px; }
    }
  </style>
</head>
<body>
  <div class="hint" id="hint">Try to catch the chocolate &#x1F36B; (move your mouse near it)</div>
  <div class="timer" id="timer">&#x23F1; 20s</div>

  <div class="stage" id="stage">
    <div class="choco" id="runner" aria-label="runaway chocolate">
      <img src="https://cdn-icons-png.flaticon.com/512/3081/3081967.png" alt="chocolate" draggable="false" />
      <div class="face-row">
        <div class="eyes" id="eyes">&#x1F440;</div>
        <div class="mouth" id="mouth">&#x1F61B;</div>
      </div>
    </div>
  </div>

  <!-- 4 peeking chocolates from all sides -->
  <div class="side-peek from-right" id="peekRight">
    <div class="choco-peek">
      <img src="https://cdn-icons-png.flaticon.com/512/3081/3081967.png" alt="chocolate" draggable="false" />
      <div class="peek-face"><div class="peek-eyes">&#x1F440;</div><div class="peek-mouth">&#x1F60A;</div></div>
    </div>
    <div class="card">
      <div class="msg">&#x1F496; You are the sweetness of my life</div>
    </div>
  </div>

  <div class="side-peek from-left" id="peekLeft">
    <div class="choco-peek">
      <img src="https://cdn-icons-png.flaticon.com/512/3081/3081967.png" alt="chocolate" draggable="false" />
      <div class="peek-face"><div class="peek-eyes">&#x1F440;</div><div class="peek-mouth">&#x1F970;</div></div>
    </div>
    <div class="card">
      <div class="msg">&#x1F339; Every moment with you is sweet</div>
    </div>
  </div>

  <div class="side-peek from-top" id="peekTop">
    <div class="choco-peek">
      <img src="https://cdn-icons-png.flaticon.com/512/3081/3081967.png" alt="chocolate" draggable="false" />
      <div class="peek-face"><div class="peek-eyes">&#x1F440;</div><div class="peek-mouth">&#x1F618;</div></div>
    </div>
    <div class="card">
      <div class="msg">&#x2728; You make my heart melt</div>
    </div>
  </div>

  <div class="side-peek from-bottom" id="peekBottom">
    <div class="choco-peek">
      <img src="https://cdn-icons-png.flaticon.com/512/3081/3081967.png" alt="chocolate" draggable="false" />
      <div class="peek-face"><div class="peek-eyes">&#x1F440;</div><div class="peek-mouth">&#x1F607;</div></div>
    </div>
    <div class="card">
      <div class="msg">&#x1F48C; Forever yours, sweet one</div>
    </div>
  </div>

  <script>
    const stage = document.getElementById("stage");
    const runner = document.getElementById("runner");
    const mouth = document.getElementById("mouth");
    const hint = document.getElementById("hint");
    const timerEl = document.getElementById("timer");
    const peeks = [
      document.getElementById("peekRight"),
      document.getElementById("peekLeft"),
      document.getElementById("peekTop"),
      document.getElementById("peekBottom")
    ];

    let x = window.innerWidth * 0.45;
    let y = window.innerHeight * 0.58;
    let escapes = 0;
    let offered = false;

    // Timer - 20 seconds
    const gameDuration = 20;
    let timeLeft = gameDuration;
    const gameTimer = setInterval(() => {
      timeLeft--;
      timerEl.textContent = "\u23F1 " + timeLeft + "s";
      if (timeLeft <= 5) timerEl.classList.add("urgent");
      if (timeLeft <= 0) {
        clearInterval(gameTimer);
        burstAndReveal();
      }
    }, 1000);

    const scareRadius = 120;
    const jumpStrength = 180;
    const edgePadding = 60;

    function clamp(val, min, max){ return Math.max(min, Math.min(max, val)); }

    function setRunnerPos(nx, ny){
      x = clamp(nx, edgePadding, window.innerWidth - edgePadding);
      y = clamp(ny, edgePadding, window.innerHeight - edgePadding);
      runner.style.left = x + "px";
      runner.style.top  = y + "px";
    }

    function spawnHeart(px, py){
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = Math.random() > 0.5 ? "\uD83D\uDC96" : "\u2728";
      h.style.left = px + "px";
      h.style.top  = py + "px";
      stage.appendChild(h);
      setTimeout(() => h.remove(), 950);
    }

    function spawnBurstParticles(){
      const emojis = ["\uD83C\uDF6B","\uD83D\uDC96","\u2728","\uD83D\uDC95","\uD83C\uDF1F","\uD83D\uDCA5","\uD83C\uDF80","\u2764\uFE0F"];
      for(let i = 0; i < 16; i++){
        const p = document.createElement("div");
        p.className = "burst-particle";
        p.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        const angle = (Math.PI * 2 * i) / 16;
        const dist = 90 + Math.random() * 140;
        p.style.left = x + "px";
        p.style.top = y + "px";
        p.style.setProperty("--tx", Math.cos(angle)*dist + "px");
        p.style.setProperty("--ty", Math.sin(angle)*dist + "px");
        stage.appendChild(p);
        setTimeout(() => p.remove(), 1200);
      }
    }

    function burstAndReveal(){
      if (offered) return;
      offered = true;
      clearInterval(gameTimer);
      timerEl.textContent = "\u23F1 0s";
      timerEl.classList.add("urgent");

      // Burst the runner!
      spawnBurstParticles();
      runner.classList.add("burst");
      hint.textContent = "\uD83D\uDCA5 BURST! But wait\u2026 look around \uD83D\uDC40";

      // After burst, reveal 4 peeking chocolates
      setTimeout(() => {
        runner.style.display = "none";
        hint.textContent = "\uD83D\uDC8C Some chocolates have something to say\u2026";

        peeks.forEach((p, i) => {
          setTimeout(() => {
            p.classList.add("show");
            const rect = p.getBoundingClientRect();
            for(let j=0;j<6;j++){
              setTimeout(() => spawnHeart(
                rect.left + rect.width/2 + (Math.random()*100-50),
                rect.top + rect.height/2 + (Math.random()*100-50)
              ), j*120);
            }
          }, i * 450);
        });
      }, 900);
    }

    function fleeFromMouse(mx, my){
      const dx = x - mx;
      const dy = y - my;
      const dist = Math.hypot(dx, dy) || 1;

      if (dist < scareRadius){
        mouth.textContent = ["\uD83D\uDE1B","\uD83D\uDE06","\uD83D\uDE1D","\uD83D\uDE43"][escapes % 4];

        const ux = dx / dist;
        const uy = dy / dist;
        const jitter = 0.65 + Math.random()*0.55;
        const nx = x + ux * jumpStrength * jitter + (Math.random()*22 - 11);
        const ny = y + uy * jumpStrength * jitter + (Math.random()*22 - 11);
        setRunnerPos(nx, ny);

        escapes++;
        const taunts = [
          "Nope \uD83D\uDE04 catch me if you can!",
          "Too slow! \uD83D\uDE1D",
          "Almost! Try again \uD83D\uDE06",
          "Haha, not even close! \uD83D\uDE43",
          "You're persistent\u2026 keep trying!",
          "Can't touch this! \uD83D\uDC83",
          "So close yet so far \uD83D\uDE02"
        ];
        hint.textContent = taunts[escapes % taunts.length];

        runner.style.transform = "translate(-50%, -50%) scale(1.05)";
        setTimeout(() => runner.style.transform = "translate(-50%, -50%) scale(1)", 120);

        spawnHeart(x, y);
      }
    }

    setRunnerPos(x, y);

    window.addEventListener("mousemove", (e) => {
      if (offered) return;
      fleeFromMouse(e.clientX, e.clientY);
    });

    window.addEventListener("resize", () => setRunnerPos(x, y));
  </script>
</body>
</html>
